<!DOCTYPE html>
<html class="writer-html5" lang="ca" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Exercici 35_15. Especificacions de vi &mdash; Introducció a la programació amb Java 2023-24 documentació</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="_static/graphviz.css?v=eafc0fe6" />
      <link rel="stylesheet" type="text/css" href="_static/moistyle.css?v=0e2f4d36" />

  
    <link rel="shortcut icon" href="_static/logoprg.ico"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=4385e19b"></script>
        <script src="_static/doctools.js?v=888ff710"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="_static/translations.js?v=d8dd923b"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="author" title="Quant a aquests documents" href="about.html" />
    <link rel="index" title="Índex" href="genindex.html" />
    <link rel="search" title="Cerca" href="search.html" />
    <link rel="next" title="Exercici 35_16. Especificacions independents" href="exercici_35_16_mouespecs.html" />
    <link rel="prev" title="Exercici 35_14. Cerques de vi amb múltiples resultats" href="exercici_35_14_botigacerca.html" />
     
    <script class="googleanalytics" src="_static/moiscripts.js"></script>
    <meta name="robots" content="noindex">

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Introducció a la programació amb Java
              <img src="_static/logoprg.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                Curs 2023-24
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="primeres_passes.html">Primeres passes</a></li>
<li class="toctree-l1"><a class="reference internal" href="basics.html">Elements bàsics de la programació</a></li>
<li class="toctree-l1"><a class="reference internal" href="moduls.html">Mòduls</a></li>
<li class="toctree-l1"><a class="reference internal" href="fitxers.html">Fitxers</a></li>
<li class="toctree-l1"><a class="reference internal" href="poo.html">Programació Orientada a Objectes</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="bib.html">Biblioteques</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="bib_botigavins.html">El celler de la Bona Estrella</a></li>
<li class="toctree-l2"><a class="reference internal" href="bib_csv.html">Guardem les dades</a></li>
<li class="toctree-l2"><a class="reference internal" href="bib_vi.html">Vins complets</a></li>
<li class="toctree-l2"><a class="reference internal" href="bib_excepcions.html">Excepcions</a></li>
<li class="toctree-l2"><a class="reference internal" href="bib_enum.html">Enumerats</a></li>
<li class="toctree-l2"><a class="reference internal" href="bib_lists.html">Llistes</a></li>
<li class="toctree-l2"><a class="reference internal" href="bib_maps.html">Clau-Valor</a></li>
<li class="toctree-l2"><a class="reference internal" href="bib_conclusions.html">Conclusions</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="bib_exercicis.html">Exercicis</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="exercici_35_01_vi.html"> Exercici 35_01. La classe <code class="docutils literal notranslate"><span class="pre">vi</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="exercici_35_02_botiga.html"> Exercici 35_02. La classe <code class="docutils literal notranslate"><span class="pre">botiga</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="exercici_35_03_entorn.html"> Exercici 35_03. La classe <code class="docutils literal notranslate"><span class="pre">Entorn</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="exercici_35_04_csv.html"> Exercici 35_04. Guardem les dades</a></li>
<li class="toctree-l3"><a class="reference internal" href="exercici_35_05_vi_ampliat.html"> Exercici 35_05. El Vi ampliat</a></li>
<li class="toctree-l3"><a class="reference internal" href="exercici_35_06_hores_controlades.html"> Exercici 35_06. La classe <code class="docutils literal notranslate"><span class="pre">Hora</span></code> amb control d'errors</a></li>
<li class="toctree-l3"><a class="reference internal" href="exercici_35_07_hores_excepcionals.html"> Exercici 35_07. La classe Hora amb excepcions</a></li>
<li class="toctree-l3"><a class="reference internal" href="exercici_35_08_hores_ilegals.html"> Exercici 35_08. La classe Hora amb <code class="docutils literal notranslate"><span class="pre">IllegalArgumentException</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="exercici_35_09_botiga_excepcional.html"> Exercici 35_09. Excepcions a la botiga de vins</a></li>
<li class="toctree-l3"><a class="reference internal" href="exercici_35_10_gatposicio.html"> Exercici 35_10. Les posicions del gat Renat</a></li>
<li class="toctree-l3"><a class="reference internal" href="exercici_35_11_viprotegit.html"> Exercici 35_11. El vi protegit</a></li>
<li class="toctree-l3"><a class="reference internal" href="exercici_35_12_list.html"> Exercici 35_12. La classe <code class="docutils literal notranslate"><span class="pre">UsaList</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="exercici_35_13_remove.html"> Exercici 35_13. Comparació de <code class="docutils literal notranslate"><span class="pre">remove()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="exercici_35_14_botigacerca.html"> Exercici 35_14. Cerques de vi amb múltiples resultats</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#"> Exercici 35_15. Especificacions de vi</a></li>
<li class="toctree-l3"><a class="reference internal" href="exercici_35_16_mouespecs.html"> Exercici 35_16. Especificacions independents</a></li>
<li class="toctree-l3"><a class="reference internal" href="exercici_35_17_envoltastring_case.html"> Exercici 35_17. EnvoltaString indiferent a majúscules i minúscules</a></li>
<li class="toctree-l3"><a class="reference internal" href="exercici_35_18_envoltastring_str.html"> Exercici 35_18. EnvoltaString és compara amb Strings</a></li>
<li class="toctree-l3"><a class="reference internal" href="exercici_35_19_especmap.html"> Exercici 35_19. Propietats del vi</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="apendix.html">Apèndix</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Introducció a la programació amb Java</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="bib.html">Biblioteques</a></li>
          <li class="breadcrumb-item"><a href="bib_exercicis.html">Exercicis</a></li>
      <li class="breadcrumb-item active"> Exercici 35_15. Especificacions de vi</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul><div class="rst-breadcrumbs-buttons" role="navigation" aria-label="Sequential page navigation">
        <a href="exercici_35_14_botigacerca.html" class="btn btn-neutral float-left" title="Exercici 35_14. Cerques de vi amb múltiples resultats" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Anterior</a>
        <a href="exercici_35_16_mouespecs.html" class="btn btn-neutral float-right" title="Exercici 35_16. Especificacions independents" accesskey="n">Següent <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
  </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
    
           <div itemprop="articleBody">
             
  <section id="exerciseicon-t-exercici-35-15-especificacions-de-vi">
<h1><img alt="exerciseicon__T" src="_images/exerciseicon__T.png" /> Exercici 35_15. Especificacions de vi<a class="headerlink" href="#exerciseicon-t-exercici-35-15-especificacions-de-vi" title="Enllaça amb aquesta capçalera"></a></h1>
<p class="rubric">Context</p>
<ul class="simple">
<li><p>Carpeta de lliurament: <code class="docutils literal notranslate"><span class="pre">35_15_especs/</span></code></p></li>
<li><p>Continguts relacionats: <a class="reference internal" href="bib_lists.html"><span class="doc">Llistes</span></a></p></li>
<li><p>Com lliurar-lo: <a class="reference internal" href="com_lliurar.html#instruccions-git"><span class="std std-ref">instruccions</span></a></p></li>
<li><p>[✓] Exercici amb <a class="reference internal" href="sobre_exercicis.html#descripcio-exercicis-autoavaluacio"><span class="std std-ref">autoavaluació</span></a></p></li>
</ul>
<p class="rubric">Enunciat</p>
<p>Amb els canvis de l'exercici anterior hem millorat força la usabilitat
de l'aplicació.</p>
<p>Hi ha, però, un element que &quot;canta&quot;: per cercar els vins, el mètode
<code class="docutils literal notranslate"><span class="pre">Botiga.cerca()</span></code> ens cal crear un Vi. El vi que li passem, però, <strong>no
és</strong> exactament un <code class="docutils literal notranslate"><span class="pre">Vi</span></code>.</p>
<p>Per exemple, no li cal tenir referència, ja que si la té, faríem servir el
<code class="docutils literal notranslate"><span class="pre">Botiga.cerca(String)</span></code>. A més, el preu no és tampoc el preu real
del vi sinó un màxim, i l'estoc es refereix al mínim necessari. Finalment,
la resta d'atributs poden ser <code class="docutils literal notranslate"><span class="pre">null</span></code> per especificar que no cal
considerar-lo en la cerca.</p>
<p>Quan dissenyem aplicacions orientades a objectes, hem de ser conscients de
que aquests tipus d'incoherències tard o d'hora ens portaran problemes.</p>
<p>El cert és que, com ja ho diu bé el nom del seu paràmetre, el mètode
<code class="docutils literal notranslate"><span class="pre">cerca()</span></code> espera una especificació de vi i <strong>no</strong> un vi!.  Si el
concepte <em>especificació de vi</em> sembla tenir tanta rellevància, potser ja
va sent hora que li reconeguem, no trobes?</p>
<p>Tenint tot això en compte, millorem el nostre disseny afegint la classe
<code class="docutils literal notranslate"><span class="pre">Especificacio</span></code> segons el següent diagrama.</p>
<figure class="align-center" id="id1">
<p class="plantuml">
<img src="_images/plantuml-3aaf2714ecd79589cd5945b82ed110e10f6a6314.png" alt="enum Origen
enum Tipus
class Botiga {
    + cerca(ref: String): Vi
    + cerca(espec: Especificacio): List&lt;Vi&gt;
    + cerca(espec: Especificacio, preuMax: int, estocMin: int): List&lt;Vi&gt;
}

class Vi {
    + Vi(ref, nom, preu, lloc, estoc, origen, tipus, collita)
    + getRef(): String
    + getNom(): String
    + getPreu(): int
    + setPreu(int)
    + getEstoc(): int
    + setEstoc(int)
    + getLloc(): String
    + setLloc(lloc)
    + getOrigen(): Origen
    + getTipus(): Tipus
    + getCollita(): String
    + aArrayString(): String[]
    + {static} deArrayString(String[]): Vi
    + {static} esValid(ref, nom, preu, estoc, lloc, origen, tipus, collita):boolean
}

class Especificacio {
    + Especificacio(nom, origen, tipus, collita)
    + getNom(): String
    + getOrigen(): Origen
    + getTipus(): Tipus
    + getCollita(): String
}

Entorn *-- Botiga
Entorn --&gt; Vi
Entorn --&gt; Especificacio
Botiga o-- Vi
Vi *-- Origen
Vi *-- Tipus
Especificacio *-- Origen
Especificacio *-- Tipus
Botiga --&gt; Especificacio
class Especificacio #yellow

hide class circle
hide enum circle
hide enum method
skinparam classAttributeIconSize 0
skinparam class {
    BackgroundColor White
    BorderColor Black
    ArrowColor Black
}"/>
</p>
<figcaption>
<p><span class="caption-text">Diagrama de classes de la botiga de vins amb Especificacio</span><a class="headerlink" href="#id1" title="Enllaça amb aquesta imatge"></a></p>
</figcaption>
</figure>
<section id="el-metode-botiga-cerca">
<h2>El mètode <code class="docutils literal notranslate"><span class="pre">Botiga.cerca()</span></code><a class="headerlink" href="#el-metode-botiga-cerca" title="Enllaça amb aquesta capçalera"></a></h2>
<p>Com que les especificacions de vi no disposen de totes les propietats,
<code class="docutils literal notranslate"><span class="pre">Botiga</span></code> ha d'oferir diferents mètodes de cerca. Fins ara n'oferia dos:
<code class="docutils literal notranslate"><span class="pre">cerca(ref)</span></code> i <code class="docutils literal notranslate"><span class="pre">cerca(plantilla)</span></code>. Ara reemplaçarem aquest últim per
<code class="docutils literal notranslate"><span class="pre">cerca(espec)</span></code> i n'afegirem <code class="docutils literal notranslate"><span class="pre">cerca(espec,</span> <span class="pre">preuMax,</span> <span class="pre">estocMin)</span></code>. un més
per permetre cercar per preu màxim i per estoc mínim. Fixa't que
<code class="docutils literal notranslate"><span class="pre">cerca(espec)</span></code> serà equivalent a <code class="docutils literal notranslate"><span class="pre">cerca(espec,</span> <span class="pre">-1,</span> <span class="pre">-1)</span></code>.</p>
<p>Deixarà d'estar disponible la cerca per localització. No és un gran
problema. La raó principal de la cerca sol ser trobar aquesta localització
i, si ja la sap, el més probable és que la sra. Estrella vagi directament
a agafar l'ampolla que no pas usi l'aplicació.</p>
<p>Tot plegat fa que, una <code class="docutils literal notranslate"><span class="pre">Especificacio</span></code> sigui un valor immutable doncs
totes les seves propietats són fixes en el moment de la creació. Això, com
veurem més endavant, ens resultarà molt útil.</p>
</section>
<section id="el-vi-sempre-correcte">
<h2>El <code class="docutils literal notranslate"><span class="pre">Vi</span></code> sempre correcte<a class="headerlink" href="#el-vi-sempre-correcte" title="Enllaça amb aquesta capçalera"></a></h2>
<p>L'aparició de la classe <code class="docutils literal notranslate"><span class="pre">Especificacio</span></code> ens permet afegir un sistema de
seguretat per la classe <code class="docutils literal notranslate"><span class="pre">Vi</span></code> de manera que una instància no pugui tenir
valors no vàlids. Ara, en cas que intentem construir un vi amb algun valor
no vàlid, o bé intentem modificar-lo de manera que quedi no vàlid,
llençarem l'excepció <code class="docutils literal notranslate"><span class="pre">IllegalArgumentException</span></code>. És una
<code class="docutils literal notranslate"><span class="pre">RuntimeException</span></code> ja que considerem que seria un error del nostre codi
si es produís.</p>
<p>Ara <code class="docutils literal notranslate"><span class="pre">esValid()</span></code> deixa de tenir sentit per validar una instància però sí
el voldrem per assegurar-nos que els valors són vàlids abans de crear una.
Per aquesta raó, passa a ser estàtic.</p>
<p>La validesa dels atributs de <code class="docutils literal notranslate"><span class="pre">Vi</span></code> són:</p>
<ul class="simple">
<li><p>els valors de tipus String no poden ser buits, només blancs ni <code class="docutils literal notranslate"><span class="pre">null</span></code>.</p></li>
<li><p>el preu i l'estoc no poden ser negatius (ni tant sols <code class="docutils literal notranslate"><span class="pre">-1</span></code>)</p></li>
<li><p>els valors de tipus enumerat, no poden ser <code class="docutils literal notranslate"><span class="pre">null</span></code>.</p></li>
</ul>
<p>Aquests valors, però, continuaran sent vàlids per les propietats de
<code class="docutils literal notranslate"><span class="pre">Especificacio</span></code>.</p>
<p>Finalment, la classe <code class="docutils literal notranslate"><span class="pre">Especificacio</span></code> acceptarà <code class="docutils literal notranslate"><span class="pre">null</span></code> com valor per
les seves propietats. El que indicarà que no s'està especificant i que
s'accepta qualsevol.</p>
<p>Aquests canvis requeriran petites modificacions addicionals. Per exemple,
en el mètode <code class="docutils literal notranslate"><span class="pre">Botiga.afegeix()</span></code>.</p>
</section>
</section>


           </div>
          </div>
    <div class="googleanalytics">
    <div id="cookiesbox">
        Aquest lloc web utilitza galetes (<i>cookies</i>) per a analitzar el seu ús
        amb les eines que ofereix <a href="https://www.google.com/analytics">Google Analytics</a>.
        En continuar navegant-hi, estàs acceptant-ho.
        <br/>
        <a class="btn btn-neutral" onclick="setUserAcceptsCookies();">
            Tancar
            <span class="fa fa-window-close"></span>
        </a>
    </div>
    <script>setCookiesboxVisibility();</script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-41103782-2', 'auto');
      ga('send', 'pageview');
    </script>
</div>

          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="exercici_35_14_botigacerca.html" class="btn btn-neutral float-left" title="Exercici 35_14. Cerques de vi amb múltiples resultats" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Anterior</a>
        <a href="exercici_35_16_mouespecs.html" class="btn btn-neutral float-right" title="Exercici 35_16. Especificacions independents" accesskey="n" rel="next">Següent <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023-2024 Moisès Gómez Girón.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-41103782-2"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-41103782-2', {
          'anonymize_ip': false,
      });
    </script> 

</body>
</html>