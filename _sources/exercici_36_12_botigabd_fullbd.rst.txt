#############################################################
|exerciseicon___| Exercici 36_12. La botiga de vins *full-bd*
#############################################################

.. rubric:: Context

* Carpeta de lliurament: ``36_12_botigabd_fullbd/``

* Continguts relacionats: :doc:`bd_consultes`

* Com lliurar-lo: :ref:`instruccions <instruccions_git>`

.. rubric:: Enunciat

En aquest exercici desenvoluparàs una nova versió de la botiga de vins. En
aquesta ocasió, en comptes de guardar les dades al fitxer ``botiga.csv``
ho faràs a la base de dades ``botiga.bd``.

Per simplicitat, et proposo que escullis la versió de l'aplicació que vas
desenvolupar fins l'exercici en que :doc:`guardàvem les dades
<exercici_35_04_csv>`. Això permetrà que puguem provar les operacions
d'afegir, modificar i eliminar que van quedar abandonades en versions
posteriors. Si vols, però, pots escollir qualsevol versió posterior.

El funcionament serà equivalent al que hem fet servir per la versió amb
fitxers. És a dir, en arrencar l'aplicació carregarà tots els vins que
trobi a la base de dades (si és que existeix i n'hi ha cap) i en sortir,
els guardarà per què estiguin disponibles a la propera sessió.

La classe ``Vi`` requerirà poder guardar l'identificador de la base de
dades. Et proposo que facis servir un mecanisme similar al que hem vist
per les classes de ``Zoo`` a exercicis anteriors.

Tindràs l'oportunitat de realitzar aquest exercici en diferents versions.

Aquesta versió segurament et resultarà força més senzilla que
:doc:`l'anterior<exercici_36_11_botigabd_eficient>`.

Versió *full-db*
================

La versió *eficient* esta prou bé, però encara podem fer un pas més:
convertir la ``Botiga`` en la classe que se n'encarrega de la
persistència de manera que ``Entorn`` deixa de preocupar-se'n.

La botiga deixarà de guardar els vins a un array i els mantindrà
directament a la base de dades. Així, quan es cerqui un vi, farà la
consulta a la bd. Quan s'afegeixi, modifiqui o elimini, també realitzarà
l'operació sobre la base de dades.

Això farà que ``Entorn`` es pugui despreocupar de carregar i descarregar
els vins en iniciar/finalitzar.
