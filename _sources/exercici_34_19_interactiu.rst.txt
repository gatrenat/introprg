#####################################################
|exerciseicon__T| Exercici 34_19. Ascensor interactiu
#####################################################

.. rubric:: Context

* Carpeta de lliurament: ``34_19_interactiu/``

* Continguts relacionats: :doc:`poo_intro_accions`

* Com lliurar-lo: :ref:`instruccions <instruccions_git>`

* [✓] Exercici amb :ref:`autoavaluació<descripcio_exercicis_autoavaluacio>`

.. rubric:: Enunciat

Aquest exercici torna a revisar l'ascensor que hem fet en exercicis
anteriors. En aquesta ocasió ampliaràs els mètodes que ofereix l'ascensor
de manera que aquest sigui més usable.

Afegeix al repertori de mètodes de ``Ascensor`` els següents:

.. uml::
    :align: center

     @startuml
     hide circle
     skinparam monochrome true
     skinparam classAttributeIconSize 0

     class Ascensor {
         + aturat(): boolean
         + arrencaAmunt(): boolean
         + arrencaAbaix(): boolean
         + seguentPis(): int
     }
     @enduml


Els mètodes ``aturat()``, ``arrencaAbaix()`` i ``arrencaAmunt()``
canviaran el moviment de l'ascensor a l'indicat, si no ho estava ja, i
retornaran ``true`` quan s'hagi produït el canvi.

Cal tenir en compte que, l'ascensor no podrà arrencar cap a munt o cap a
baix si no estava aturat. En cas que se li demani, l'ascensor  es quedarà
amb el moviment que ja tenia.

El mètode ``seguentPis()`` permetrà fer passar l'ascensor al pis següent
segons el moviment. Per exemple, si està pujant i es troba al pis 1, en
demanar-li ``seguentPis()`` passarà al pis 2 i seguirà pujant.

Quan l'ascensor es troba a baix de tot baixant o a dalt del tot pujant, el
``seguentPis()`` correspondrà, respectivament al pis 0 o al 9, i invertirà
el sentit del moviment. Per exemple, si es trobava al pis 10 pujant,
``seguentPis()`` el coŀlocarà al pis 9 i baixant.

``seguentPis()`` retornarà el nou pis.

``seguentPis()`` no podrà canviar de pis si l'ascensor està aturat. En
aquest cas, retornarà el mateix pis.

La següent plantilla ``UsaAscensor`` permetrà exercitar algunes d'aquestes
noves funcionalitats.

.. code-block:: java
   :linenos:

    public class UsaAscensor {
        public static int llegeixEnter() {
            String resposta = Entrada.readLine();
            if (! UtilString.esEnter(resposta)) {
                return -2;
            }
            return Integer.parseInt(resposta);
        }
        public static void main(String[] args) {
            Ascensor ascensor = new Ascensor();

            System.out.println("Pis inicial");
            ascensor.setPis(llegeixEnter());
            System.out.printf("Inicialment l'ascensor està %s%n", ascensor.XXX);

            // aturat a pujant
            boolean resposta = ascensor.arrencaAmunt();
            System.out.printf("En arrencar amunt l'ascensor respon %b i està %s%n",
                    resposta, ascensor.XXX);

            // demanem que baixi sense aturar
            resposta = ascensor.arrencaAbaix();
            System.out.printf("En arrencar a baix l'ascensor respon %b i està %s%n",
                    resposta, ascensor.XXX);
            
            // passem del pis indicat al la planta baixa
            System.out.println("Anant a la planta baixa quan està " + ascensor.comEsta());
            while (! ascensor.esAbaix()) {
                ascensor.XXX;       // passa al següent pis
                System.out.println("\t ara està "+ ascensor.XXX);
            }
            ascensor.aturat();
            System.out.printf("Està %s. Final de trajecte!%n", ascensor.comEsta());
        }
    }

En completar-la, la següent execució funcionarà així:

.. code-block:: console
   :emphasize-lines: 2, 4-

    $ java UsaAscensor 
    Pis inicial
    7
    Inicialment l'ascensor està aturat al pis 7
    En arrencar amunt l'ascensor respon true i està pujant al pis 7
    En arrencar a baix l'ascensor respon false i està pujant al pis 7
    Anant a la planta baixa quan està pujant al pis 7
         ara està pujant al pis 8
         ara està pujant al pis 9
         ara està pujant al pis 10
         ara està baixant al pis 9
         ara està baixant al pis 8
         ara està baixant al pis 7
         ara està baixant al pis 6
         ara està baixant al pis 5
         ara està baixant al pis 4
         ara està baixant al pis 3
         ara està baixant al pis 2
         ara està baixant al pis 1
         ara està baixant al pis 0
         ara està baixant al pis -1
    Està aturat al pis -1. Final de trajecte!

Fixa't que, donat que està pujant, primer ha d'arribar a dalt del tot per
poder anar a la planta baixa.
